{{!< default}}

{{!-- Tag Archive Page Template --}}
{{!-- This displays all posts that belong to a specific tag --}}

{{#tag}}
<div class="split-content-wrapper">
	<div class="main-content-area">

		{{!-- Tag Archive Header --}}
		<header class="archive-header">
			{{!-- Breadcrumb Navigation --}}
			<ul class="breadcrumb-list">
				<li class="breadcrumb-item home">
					{{> "icons/map-pin"}}
					<a class="title" href="{{@site.url}}">Home</a>
				</li>
				<li class="breadcrumb-separator">{{> "icons/chevron"}}</li>
				<li class="breadcrumb-item">Topics</li>
				<li class="breadcrumb-separator">{{> "icons/chevron"}}</li>
				<li class="breadcrumb-item current">{{name}}</li>
			</ul>

			{{!-- Tag Title & Description --}}
			<div class="archive-title-wrapper">
				{{#if feature_image}}
					<div class="archive-feature-image">
						<img src="{{img_url feature_image size="l"}}"
							 alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{name}}{{/if}}">
					</div>
				{{/if}}

				<h1 class="archive-title">{{name}}</h1>

				{{#if description}}
					<p class="archive-description">{{description}}</p>
				{{/if}}

				<p class="archive-count">{{plural count.posts empty='No posts' singular='% post' plural='% posts'}}</p>
			</div>
		</header>

		{{!-- Posts Feed with Infinite Scroll --}}
		{{#if posts}}
			{{!-- Post Feed Container --}}
			<div class="post-feed masonry-grid">
				{{#foreach posts}}
					{{> "components/post-card"}}
				{{/foreach}}
			</div>

			{{!-- Load More Button --}}
			{{#if pagination.next}}
				<div class="load-more">
					<button id="load-more-btn" type="button" aria-label="Load more posts">
						Load More Posts
					</button>
				</div>
			{{else}}
				<div class="load-more">
					<button id="load-more-btn" type="button" disabled class="no-more">
						No more posts
					</button>
				</div>
			{{/if}}

			{{!-- Pagination Data for JavaScript --}}
			<script type="application/json" id="pagination-data">
			{
				"currentPage": {{pagination.page}},
				"totalPages": {{pagination.pages}},
				"hasNext": {{#if pagination.next}}true{{else}}false{{/if}},
				"hasPrev": {{#if pagination.prev}}true{{else}}false{{/if}},
				"total": {{pagination.total}},
				"limit": {{pagination.limit}}
			}
			</script>

		{{else}}
			<div class="no-posts-message">
				<p>No posts found with this tag yet.</p>
				<a href="{{@site.url}}" class="button">Return Home</a>
			</div>
		{{/if}}

	</div>

	{{!-- Sidebar --}}
	<aside class="content-aside">
		{{> "layout/aside-content"}}
	</aside>
</div>
{{/tag}}